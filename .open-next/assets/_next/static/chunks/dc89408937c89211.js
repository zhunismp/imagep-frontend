(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84580,e=>{"use strict";let t=(0,e.i(67784).default)("file-image",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);e.s(["FileImage",()=>t],84580)},32189,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={callServer:function(){return s.callServer},createServerReference:function(){return o.createServerReference},findSourceMapURL:function(){return i.findSourceMapURL}};for(var l in a)Object.defineProperty(r,l,{enumerable:!0,get:a[l]});let s=e.r(16014),i=e.r(67701),o=e.r(90318)},56106,(e,t,r)=>{t.exports=e.r(29527)},49511,e=>{"use strict";var t=e.i(86143),r=e.i(22828),a=e.i(67784);let l=(0,a.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),s=(0,a.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var i=e.i(84580);let o=(0,a.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.i(53524);var n=e.i(32189);let c=(0,n.createServerReference)("404bd0fb408c6338916688bd8cd150dea9042f31b4",n.callServer,void 0,n.findSourceMapURL,"process"),d=(0,n.createServerReference)("601d14812ca2fcb654f884f206dcb64463ac6a64d5",n.callServer,void 0,n.findSourceMapURL,"upload");var u=e.i(54219),p=e.i(56106);function h(){let e=(0,p.useRouter)(),a=(0,r.useRef)(null),[n,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(!1),[b,v]=(0,r.useState)(crypto.randomUUID()),y=async e=>{if(!e||g)return;let t=Array.from(e).filter(e=>e.type.startsWith("image/"));if(0!==t.length){x(!0);try{await d(t,b),m(e=>[...e,...t])}catch(e){console.log(e),u.toast.error("Failed to upload files",{richColors:!0,position:"top-right"})}finally{x(!1)}}},j=async()=>{if(0==f.length)return void u.toast.error("No file to process",{richColors:!0,position:"top-right"});try{await c(b),e.push(`/download/${b}`)}catch(e){console.log(e),u.toast.error("Failed to process files",{richColors:!0,position:"top-right"})}},w=e=>{e.preventDefault(),e.stopPropagation(),("dragenter"===e.type||"dragover"===e.type)&&h(!0),"dragleave"===e.type&&h(!1)};return(0,t.jsx)("div",{className:"w-full min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,t.jsxs)("div",{className:`w-full max-w-4xl h-[520px] rounded-2xl border-2 border-dashed bg-white shadow-xl flex flex-col transition ${n?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:w,onDragOver:w,onDragLeave:w,onDrop:e=>{e.preventDefault(),e.stopPropagation(),h(!1),y(e.dataTransfer.files)},children:[(0,t.jsx)("input",{ref:a,type:"file",multiple:!0,accept:"image/jpeg,image/png",className:"hidden",onChange:e=>y(e.target.files)}),(0,t.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["Files (",f.length,")"]}),(0,t.jsxs)("button",{onClick:()=>a.current?.click(),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition",children:[(0,t.jsx)(o,{className:"w-4 h-4"}),"Upload"]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[0===f.length&&(0,t.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-500 text-center",children:[(0,t.jsx)(l,{className:"w-10 h-10 mb-3"}),(0,t.jsx)("p",{children:"Drag & drop images here"}),g&&(0,t.jsx)("p",{className:"text-sm text-blue-600 mt-2 animate-pulse",children:"Uploadingâ€¦"})]}),f.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-100 rounded-lg",children:[(0,t.jsx)(i.FileImage,{className:"w-6 h-6 text-blue-600"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"truncate text-sm font-medium",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(e=>{if(!e)return"0B";let t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(1)+["B","KB","MB","GB"][t]})(e.size)})]}),(0,t.jsx)("button",{onClick:()=>m(e=>e.filter((e,t)=>t!==r)),className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-100",children:(0,t.jsx)(s,{className:"w-5 h-5 text-gray-400 hover:text-red-600"})})]},r))]}),(0,t.jsx)("div",{className:"p-4 border-t",children:(0,t.jsx)("button",{className:"w-full rounded-xl bg-blue-600 py-3 font-semibold text-white hover:bg-blue-700 transition disabled:opacity-50",disabled:0===f.length||g,onClick:j,children:"Compress Images"})})]})})}e.s(["default",()=>h],49511)}]);